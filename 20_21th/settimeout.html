<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>setInterval和setTimeout练习</title>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
</body>

<script>
    var fade_btn = document.getElementById("fade-btn");
    var fade_obj = document.getElementById("fade-obj");
    var st1,st2;
    var opvalue = 100;//为什么这个值一定要是全局的
    fade_btn.onclick = function(){
        if(fade_btn.innerHTML == "淡出"){
            st1 = setTimeout(fadeOut,10);
            fade_btn.disabled = true;
        }else{
            st2 = setTimeout(fadeIn,10);
            fade_btn.disabled = true;
        }
    }

    function fadeOut() {
        opvalue--;
        fade_obj.style.opacity = opvalue/100;
        if (opvalue <= 0) {
            clearTimeout(st1);
            fade_btn.innerHTML = "淡入";
            fade_btn.disabled = false;
        }else{
            st1 = setTimeout(fadeOut,30);
        }
    }

    function fadeIn() {
        opvalue++;
        fade_obj.style.opacity = opvalue/100;
        fade_btn.disabled = true;
        if (opvalue >= 100) {
            clearTimeout(st2);
            fade_btn.innerHTML = "淡出";
            fade_btn.disabled = false;
        }else{
            st2 = setTimeout(fadeIn,30);
        }
    }
</script>
</html>